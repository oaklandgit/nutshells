#!/usr/bin/env nu

# ==========================================================================
# This code is MIT licensed.
# The comics accessed through this API remain under their original copyright
# and are not covered by this license.
# ==========================================================================

let temp_file = $"/tmp/comic_(date now | format date '%Y%m%d_%H%M%S_%f')"
let comic = (http get https://comics-q142.onrender.com/api/comic)

# Print meta info
print $"($comic.series) by ($comic.author)"

# Get image
let img_url = ($comic.images | first)
http get $img_url | save $temp_file

# Display it
viu $temp_file

# Clean up
rm $temp_file
